{"version":3,"sources":["components/Button/Button.js","utils/DeriNumberFormat.js","components/hoc/withModal.js","hooks/useDisableScroll.js","hooks/useClaimInfo.js","components/Claim/Claim.js","components/Mining/Liquidity/Liquidity.js","components/Mining/Liquidity/Dialog/AddLiquidity.js","hooks/useSpecification.js","components/Mining/Liquidity/Dialog/RemoveLiquidity.js","components/Mining/Liquidity/LiquidityMining.js","components/Mining/Trade/Liquidity.js","../node_modules/react-modal/lib/index.js"],"names":["Button","btnText","className","disabled","click","afterClick","checkApprove","wallet","spec","lang","useState","status","setStatus","isApproved","setIsApproved","pending","setPending","buttonText","setbuttonText","loadRef","useRef","onClick","a","beforeAction","afterAction","current","style","display","loadApproveStatus","detail","account","pool","bTokenId","res","approve","success","alert","useEffect","ref","marginRight","DeriNumberFormat","props","renderablity","setRenderablity","allowZero","others","undefined","value","isNaN","Math","abs","displayType","withModal","Component","appElement","document","getElementById","customizeStyle","overlay","position","zIndex","background","content","border","inset","overflow","WithModal","state","modalIsOpen","this","overlayMerged","Object","assign","mergedStyle","isOpen","portalClassName","intl","locale","onClose","React","inject","observer","useDisableScroll","nested","querySelector","useClaimInfo","claimInfo","setClaimInfo","interval","loadClaimInfo","isConnected","getUserInfoAll","claimed","total","toFixed","unclaimed","valid","amount","harvestDeriLp","lp","harvestDeriTrade","trade","chainId","window","setInterval","clearInterval","Claim","miningClaim","tradingClaim","setBtnText","setClaimed","claimInfoInterval","remainingTime","setRemainingTime","config","useConfig","claim","name","eqInNumber","parseInt","Date","now","mintDToken","connect","result","period","dis","h","m","s","decimalScale","AddDialog","address","baseToken","afterAdd","balance","isLpPool","baseTokenId","symbolId","setAmount","decimal","setDecimal","addValue","setAddValue","setSpec","loadSpec","getSpecification","useSpecification","addLiq","max","bg","gt","minAddLiquidity","addLpLiquidity","addLiquidity","substring","indexOf","length","thousandSeparator","type","placeholder","onChange","e","target","RemoveDialog","liqInfo","afterRemove","unit","version","setBalance","remove","totalShares","cur","removeLpLiquidity","removeLiquidity","eq","formatShares","data-dismiss","Operator","loadLiqidityInfo","btnType","setBtnType","setIsOpen","buttonElment","setButtonElment","loadBalance","getLpWalletBalance","getWalletBalance","isApprove","isLpUnlocked","isUnlocked","unlockLp","unlock","error","message","refresh","el","switchNetwork","id","liquidity","setLiquidity","bToken","setBToken","loadLiquidityInfo","getPoolInfoApy","apyPool","getPoolLiquidity","pooLiquidity","info","getLpLiquidityInfo","getLiquidityInfo","isLP","getLpPoolInfoApy","lapy","lpApy","apy2","shares","multipliedBy","shareValue","poolLiquidity","apy","percent","dividedBy","toString","values","sharesTitle","pnl","plus","multiplier","isCakeLP","suffix","title","isSushiLP","prefix","LiquidityMining","configInfo","Config","userInfoInPool","setUserInfoInPool","tradeSummary","setTradeSummary","history","useHistory","loadUserInfoInPool","userInfo","getUserInfoInPool","userInfoPool","myTradingVolumeCurrent","volume1h","getTradeInfo","poolInfo","totalTradingVolumeCurrent","configs","load","isV1","find","c","storeConfig","push","defineProperty","exports","obj","_Modal","require","_Modal2","__esModule","default","module"],"mappings":"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","file":"static/js/5.f177eca5.chunk.js","sourcesContent":["import {useState,useRef,useEffect} from 'react';\r\nexport default function Button({btnText,className,disabled,click,afterClick,checkApprove,wallet,spec,lang}){\r\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\r\n  const [isApproved, setIsApproved] = useState(true);\r\n  const [pending, setPending] = useState(false);\r\n  const [buttonText, setbuttonText] = useState(btnText)\r\n  const loadRef = useRef(null)\r\n\r\n  const onClick = async () => {\r\n    if(status !== 'enabled') {\r\n      return ;\r\n    }\r\n    beforeAction()\r\n    const result = await click();    \r\n    if(result){\r\n      afterClick && afterClick()\r\n    } \r\n    afterAction()\r\n  }\r\n\r\n  const beforeAction = ()  => {\r\n    setStatus('disabled')\r\n    setPending(true);\r\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\r\n  }\r\n\r\n  const afterAction = () => {\r\n    loadRef.current && (loadRef.current.style.display = 'none')\r\n    setStatus('enabled')\r\n    setPending(false);\r\n  }\r\n\r\n  const loadApproveStatus = async () => {\r\n    if(checkApprove && wallet && wallet.detail.account){\r\n      const res = await wallet.isApproved(spec.pool,spec.bTokenId)\r\n      setIsApproved(res);\r\n    }\r\n  }\r\n  const approve = async () => {\r\n    beforeAction();\r\n    const res = await wallet.approve(spec.pool,spec.bTokenId);\r\n    if(res.success){\r\n      setIsApproved(true);\r\n    } else {\r\n      setIsApproved(false)\r\n      alert(lang['approve-failed'])\r\n    }\r\n    afterAction();\r\n  }\r\n\r\n  const action = () => {\r\n    if(isApproved){\r\n      onClick();\r\n    } else {\r\n      approve();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadApproveStatus();\r\n    return () => {};\r\n  }, [wallet,spec,checkApprove]);\r\n\r\n  useEffect(() => {\r\n    if(btnText){\r\n      setbuttonText(btnText)\r\n    }\r\n    return () => {\r\n    }\r\n  }, [btnText])\r\n\r\n  return(\r\n    <button className={className} onClick={action} >\r\n        <span className='btn-loading-wrap'>\r\n          <span ref={loadRef}\r\n            className='spinner spinner-border spinner-border-sm'\r\n            style={{display : 'none' ,marginRight : '2'}}>\r\n          </span>\r\n        </span>\r\n          {pending ? lang['pending'] : (isApproved ? buttonText : lang['approve'])  }\r\n        </button>\r\n  )\r\n}","import React,{useState,useEffect} from 'react'\r\nimport NumberFormat from 'react-number-format'\r\n\r\nexport default function DeriNumberFormat(props){\r\n  const [renderablity, setRenderablity] = useState('--');\r\n\r\n  useEffect(() => {\r\n    const {allowZero,...others} = props \r\n    if(((props.value !== undefined && props.value !== '' && props.value !== 'NaN') || ((isNaN(props.value) && Math.abs(props.value)) === 0 && allowZero === true ))) {\r\n      setRenderablity(<NumberFormat {...others} displayType = 'text' />)\r\n    } \r\n    return () => {};\r\n  }, [props.value]);\r\n\r\n  return renderablity;\r\n}","import React from 'react'\r\nimport Modal from 'react-modal/lib/components/Modal';\r\nimport { inject, observer } from 'mobx-react';\r\n\r\nconst withModal = Component => {\r\n  const appElement = document.getElementById('root')\r\n  const customizeStyle =  {\r\n    overlay: {\r\n      position: 'fixed',\r\n      zIndex : 1,\r\n      background : 'rgb(0 0 0 / 0.5)'\r\n    },\r\n    content: {\r\n      position: 'absolute',\r\n      border : 0,\r\n      background : 'none',\r\n      inset : 0,\r\n      overflow : 'initial'\r\n    }\r\n  };\r\n\r\n  class WithModal extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        modalIsOpen : false\r\n      }\r\n    }\r\n\r\n    render(){\r\n      const {modalIsOpen,className,overlay = {}} = this.props\r\n      const overlayMerged = Object.assign(customizeStyle.overlay,{...overlay})\r\n      const mergedStyle = Object.assign(customizeStyle,{overlay :overlayMerged})\r\n      return (\r\n        <Modal isOpen={modalIsOpen} style={mergedStyle} appElement={appElement} portalClassName={this.props.intl.locale}>\r\n          <div className={className}>\r\n            <Component {...this.props} className={className} onClose={this.props.onClose}/>\r\n          </div>\r\n        </Modal>\r\n      )\r\n    }\r\n  }\r\n\r\n  return inject('intl')(observer(WithModal)) ;\r\n}\r\nexport default withModal;","import { useEffect } from 'react'\r\n\r\nexport default function useDisableScroll(nested) {\r\n  \r\n  useEffect(() => {\r\n    // window.scrollTo(0, 0);\r\n    document.querySelector('body').style.overflow = 'hidden'\r\n    return () => {\r\n      if(!nested){\r\n        document.querySelector('body').style.overflow = 'auto'\r\n      }\r\n    };\r\n  }, []);\r\n  return null;\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { getUserInfoAll ,deriToNatural} from '../lib/web3js/indexV2';\r\n\r\n\r\nexport default function useClaimInfo(wallet){\r\n  const [claimInfo, setClaimInfo] = useState({});\r\n  let interval = null;\r\n\r\n  const loadClaimInfo =  async () => {\r\n    if(wallet.isConnected()){\r\n      const claimInfo  = await getUserInfoAll(wallet.detail.account);\r\n      const claimed = (+claimInfo.total).toFixed(2);\r\n      const unclaimed = claimInfo.valid ? (+claimInfo.amount).toFixed(2) : 0;\r\n      const harvestDeriLp = (+claimInfo.lp).toFixed(2);\r\n      const harvestDeriTrade = (+claimInfo.trade).toFixed(2);\r\n      const chainId = claimInfo.chainId\r\n      setClaimInfo({claimed,unclaimed,harvestDeriLp,harvestDeriTrade,chainId})\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    interval = window.setInterval(loadClaimInfo,1000 * 60 *3);\r\n      loadClaimInfo();\r\n    return () => clearInterval(interval);\r\n  }, [wallet.detail.account])\r\n  return [claimInfo,interval];\r\n}","import { useState, useEffect} from 'react'\r\n\r\nimport useClaimInfo from \"../../hooks/useClaimInfo\";\r\nimport useConfig from \"../../hooks/useConfig\";\r\nimport { mintDToken } from \"../../lib/web3js/indexV2\";\r\nimport Button from '../Button/Button';\r\nimport { eqInNumber } from '../../utils/utils';\r\nimport DeriNumberFormat from '../../utils/DeriNumberFormat';\r\n\r\nexport default function Claim({wallet,miningClaim,tradingClaim,lang}){\r\n\tconst [btnText, setBtnText] = useState(lang['connect-wallet'])\r\n\tconst [claimed, setClaimed] = useState(false);\r\n\tconst [claimInfo,claimInfoInterval] = useClaimInfo(wallet);\r\n\tconst [remainingTime, setRemainingTime] = useState('')\r\n\tconst config = useConfig(claimInfo.chainId) \r\n\r\n  //claim deri\r\n\tconst claim = async () => {\r\n\t\tif(config.name === undefined) {\r\n\t\t\talert(`${lang['wrong-network']}`);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!eqInNumber(wallet.detail.chainId,claimInfo.chainId)) {\r\n\t\t\talert(`${lang['your-deri-is-on']} ${ config.name } ${lang['connect-to']} ${ config.name } ${lang['to-claim']}`)\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\tif ((+claimInfo.unclaimed) === 0) {\r\n\t\t\talert(lang['no-deri-to-claim-yet']);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet now = parseInt(Date.now() / 1000) % (3600 * 8);\r\n\t\tif (now < 1800) {\r\n\t\t\talert(lang['claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch']);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst res = await mintDToken(wallet.detail.chainId,wallet.detail.account)\r\n\t\tif(res.success){\r\n\t\t\tclearInterval(claimInfoInterval);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\talert(lang['claim-failed'])\r\n\t\t\treturn false;\r\n\t\t}\r\n  }\r\n\r\n\tconst click = async () => {\r\n\t\tif(wallet.isConnected()){\r\n\t\t\tconst res = await claim();\r\n\t\t\tif(res){\r\n\t\t\t\tsetClaimed(true)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry{\r\n\t\t\t\tconst result =await wallet.connect();\r\n\t\t\t\treturn result ? true : false\r\n\t\t\t} catch (e){\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t} \r\n\t}\r\n\r\n\r\n\t\r\n\t//初始化按钮文案和事件\r\n\tconst initButton = () => {\r\n\t\tif(wallet.isConnected()){\r\n\t\t\tsetBtnText(lang['claim'])\r\n\t\t} else {\r\n\t\t\tsetBtnText(lang['collect-wallet'])\r\n\t\t}\r\n\t}\r\n  \r\n  useEffect(() => {\r\n\t\tlet interval = null;\r\n\t\tif(miningClaim){\r\n\t\t\t//计数器\r\n\t\t\tinterval = window.setInterval(() => {\r\n\t\t\t\tlet period = 3600 * 8;\r\n\t\t\t\tlet current = parseInt(Date.now()/1000);\r\n\t\t\t\tlet epochBegin = parseInt(current / period)*period;\r\n\t\t\t\tlet dis = (epochBegin + period - current);\r\n\t\t\t\tlet h = parseInt(dis / 3600);\r\n\t\t\t\tlet m = parseInt((dis % 3600)/60)\r\n\t\t\t\tlet s = parseInt(dis % 60) \r\n\t\t\t\tsetRemainingTime(`${h} ${lang['h']} ${m} ${lang['m']} ${s} ${lang['s']}`);\r\n\t\t\t},1000);\r\n\t\t}    \r\n\r\n\t\tinitButton();\t\t\r\n    return () => {\r\n      interval && clearInterval(interval);\r\n\t\t};\r\n\t\t\r\n  }, [wallet.detail.account]);\r\n\r\n\r\n  return (\r\n    <div className='claim-box'>\r\n\t\t\t\t<div className='odd title'>{miningClaim ?  lang['my-liquidity-providing-harvest-in-current-epoch'] : lang['my-trading-harvest-in-current-epoch']}</div>\r\n\t\t\t\t{miningClaim && <div className='odd text'>\r\n\t\t\t\t\t\t<div className='text-title'>{lang['current-epoch-remaining-time']}</div>\r\n\t\t\t\t\t\t<div className='text-num'>{ remainingTime }</div>\r\n\t\t\t\t</div>}\t\t\t\t\r\n\t\t\t\t<div className='odd text'>\r\n\t\t\t\t\t\t{miningClaim && <div className='text-title'>{lang['my-harvest-in-current-epoch-estimated']}</div>}\r\n\t\t\t\t\t\t{tradingClaim && <div className='text-title'>{lang['my-trading-harvest-in-current-epoch-Est']}</div>}\r\n\t\t\t\t\t\t<div className='text-num'>{ miningClaim ? claimInfo.harvestDeriLp : claimInfo.harvestDeriTrade} {lang['deri']}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='odd text'>\r\n\t\t\t\t\t\t<div className='text-title'>{lang['claimed-deri']}</div>\r\n\t\t\t\t\t\t<div className='text-num'>{claimed ? ((+claimInfo.claimed) + (+claimInfo.unclaimed)).toFixed(2) : claimInfo.claimed }</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='odd text'>\r\n\t\t\t\t\t\t<div className='text-title'></div>\r\n\t\t\t\t\t\t<div className='text-num'></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='odd text'>\r\n\t\t\t\t\t\t<div className='text-title'>{lang['unclaimed-deri']}</div>\r\n\t\t\t\t\t\t<div className='text-num'>{ claimed ? 0 : <DeriNumberFormat value={claimInfo.unclaimed} decimalScale={2}/>}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{tradingClaim && \r\n\t\t\t\t<div className='odd text'>\r\n\t\t\t\t\t\t<div className='text-title'></div>\r\n\t\t\t\t\t\t<div className='text-num'></div>\r\n\t\t\t\t</div>}\r\n\t\t\t\t<div className='odd claim-network'>\r\n\t\t\t\t\t\t{miningClaim && <div className='text-title'>{lang['your-deri-is-on']} { config.name }  {lang['connect-to']} { config.name } {lang['to-claim']}</div>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='claim-btn'>\r\n\t\t\t\t\t<Button btnText={btnText} click={click} className='claim' lang={lang}/>\t\t\t\t\t\r\n\t\t\t\t</div>\r\n      </div>\r\n  ) \r\n}","import React, { useState, useEffect} from 'react'\r\nimport {\r\n\tgetLiquidityInfo,getPoolInfoApy,isUnlocked,unlock,getPoolLiquidity, getWalletBalance, unlockLp, isLpUnlocked, getLpWalletBalance, getLpLiquidityInfo,getLpPoolInfoApy, bg\r\n} from '../../../lib/web3js/indexV2'\r\nimport AddLiquidity from './Dialog/AddLiquidity';\r\nimport RemoveLiquidity from './Dialog/RemoveLiquidity';\r\nimport Button from '../../Button/Button';\r\nimport { inject, observer } from 'mobx-react';\r\nimport withModal from '../../hoc/withModal';\r\nimport { eqInNumber, isCakeLP, isLP, isSushiLP } from '../../../utils/utils';\r\nimport DeriNumberFormat from '../../../utils/DeriNumberFormat';\r\n\r\nfunction Liquidity({wallet,version,chainId,baseToken,address,type,baseTokenId,symbolId,lang}) {\r\n  const [liquidity,setLiquidity] = useState({})\r\n  const [bToken,setBToken] = useState(baseToken)\r\n\tconst isLpPool = (type === 'lp')\r\n\tconst loadLiquidityInfo = async () => {\r\n\t\tconst apyPool = await getPoolInfoApy(chainId,address,baseTokenId)\r\n\t\tconst pooLiquidity = await getPoolLiquidity(chainId,address,baseTokenId);\r\n\t\tif(wallet.isConnected() && eqInNumber(chainId , wallet.detail.chainId)){\r\n\t\t\tlet info = null;\r\n\t\t\tif(isLpPool){\r\n\t\t\t\tinfo = await getLpLiquidityInfo(chainId,address,wallet.detail.account)\r\n\t\t\t} else {\r\n\t\t\t\tinfo = await getLiquidityInfo(chainId,address,wallet.detail.account,baseTokenId);\r\n\t\t\t}\r\n\t\t\tlet lpApy ;\r\n\t\t\tif(isLP(address)){\r\n\t\t\t\tlet lapy = await getLpPoolInfoApy(chainId,address)\r\n\t\t\t\tlpApy = (+lapy.apy2) * 100;                     \t\t\t\t\t\t\r\n\t\t\t\t// if(!info.shareValue){\r\n\t\t\t\t// \tinfo.shareValue = 1; \r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t\tif(info){\r\n\t\t\t\tconst shares = info.shares ? bg(info.shares) : bg(0)\r\n\t\t\t\tif(version === 'v1' || version === 'v2_lite') {\r\n\t\t\t\t\tconst total = shares.isNaN() ? bg(0) : shares.multipliedBy(info.shareValue) \r\n\t\t\t\t\tsetLiquidity({\r\n\t\t\t\t\t\ttotal :  info.poolLiquidity,\r\n\t\t\t\t\t\tapy : ((+apyPool.apy) * 100).toFixed(2),\r\n\t\t\t\t\t\tshareValue : info.shareValue,\r\n\t\t\t\t\t\tpercent : info.poolLiquidity > 0 ? total.dividedBy(info.poolLiquidity).multipliedBy(100).toFixed(2) : 0,\r\n\t\t\t\t\t\tshares : shares.toFixed(2),\r\n\t\t\t\t\t\tformatShares : shares.toFixed(2),\r\n\t\t\t\t\t\ttotalShares : bg(shares).toString(),\r\n\t\t\t\t\t\tvalues : total.toFixed(2),\r\n\t\t\t\t\t\tlpApy,\r\n\t\t\t\t\t\tunit : lang['shares'],\r\n\t\t\t\t\t\tsharesTitle : lang['staked-balance']\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetLiquidity({\r\n\t\t\t\t\t\ttotal : info.poolLiquidity,\r\n\t\t\t\t\t\tapy : ((+apyPool.apy) * 100).toFixed(2),\r\n\t\t\t\t\t\tpnl : (+info.pnl).toFixed(2),\r\n\t\t\t\t\t\tshares : shares.toString(),\r\n\t\t\t\t\t\tformatShares : bg(shares).plus(info.pnl).toFixed(2),\r\n\t\t\t\t\t\ttotalShares : bg(shares).plus(info.pnl).toString(),\r\n\t\t\t\t\t\tpercent : info.poolLiquidity > 0 ? shares.dividedBy(info.poolLiquidity).multipliedBy(100).toFixed(2) : 0,\r\n\t\t\t\t\t\tunit : baseToken,\r\n\t\t\t\t\t\tsharesTitle : lang['my-Liquidity'],\r\n\t\t\t\t\t\tmultiplier : `${apyPool.multiplier}x`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tlet lpApy ;\r\n\t\t\tif(isLP(address)){\r\n\t\t\t\tlet lapy = await getLpPoolInfoApy(chainId,address)\r\n        \t\tlpApy = (+lapy.apy2) * 100;                           \r\n\t\t\t}\r\n\t\t\tif(pooLiquidity){\r\n\t\t\t\tsetLiquidity({\r\n\t\t\t\t\ttotal : pooLiquidity.liquidity,\r\n\t\t\t\t\tapy : (+apyPool.apy) * 100,\r\n\t\t\t\t\tlpApy\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tloadLiquidityInfo();\r\n\t\t//cake 显示的baseToken 不一致，特殊处理\r\n\t\tif(isCakeLP(address)){\r\n\t\t\tsetBToken('CAKE-LP')\r\n\t\t}\r\n\t\treturn () => {}\r\n\t}, [wallet.detail.account,baseToken])\r\n\r\n\r\n  return (\r\n    <div className=\"liquidity-box\">\r\n      <div className=\"odd title\">{lang['provide']} { bToken } {lang['earn-deri']}</div>\r\n\t\t\t\t<div className=\"odd text\">\r\n\t\t\t\t\t\t<div className=\"text-title\">{lang['pool-total-liquidity']}</div>\r\n\t\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat allowZero={true} value={ liquidity.total} suffix={` ${ bToken}`  } thousandSeparator={true}/></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{version === 'v2' && <div className='odd text'>\r\n\t\t\t\t\t<div className='text-title'>{lang['multiplier']}</div>\r\n\t\t\t\t\t<div className='text-num multiplier' title={lang['multiplier-tip']}>{liquidity.multiplier}</div>\r\n\t\t\t\t</div>\t}\r\n\t\t\t\t<div className=\"odd text\">\r\n\t\t\t\t\t\t<div className=\"text-title\">{lang['apy']}</div>\r\n\t\t\t\t\t\t<div className='text-num' >\r\n\t\t\t\t\t\t\t<span title={isLP(address) && 'DERI-APY'} className={`${isLP(address) && 'sushi-apy-underline'}`}>\r\n\t\t\t\t\t\t\t\t<DeriNumberFormat value={ liquidity.apy } decimalScale={2} suffix='%'/></span>\r\n\t\t\t\t\t\t\t\t{isLP(address) && <><span> +</span> <span className=\"sushi-apy-underline text-num\" title={isSushiLP(address) ? lang['sushi-apy'] : lang['cake-apy']}> \r\n\t\t\t\t\t\t\t\t<DeriNumberFormat value={  liquidity.lpApy } allowZero={true}  decimalScale={2} suffix='%'/></span></>}\r\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t{(version === 'v1' || version === 'v2_lite') && <div className=\"odd text\">\r\n\t\t\t\t\t<div className=\"text-title\">{lang['liquidity-share-value']}</div>\r\n\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat  allowZero={true} decimalScale={6} value={ liquidity.shareValue} suffix={ ' '+ bToken } thousandSeparator={true}/></div>\t\t\t\t\t\t\r\n\t\t\t\t</div>}\r\n\t\t\t\t<div className=\"odd text\">\r\n\t\t\t\t\t\t<div className=\"text-title\">{lang['my-liquidity-pencentage']}</div>\r\n\t\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat allowZero={true} value={ liquidity.percent } decimalScale={2} suffix={'%'}/></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"odd text\">\r\n\t\t\t\t\t\t<div className=\"text-title\">{liquidity.sharesTitle} </div>\r\n\t\t\t\t\t\t<div className=\"text-num\"><DeriNumberFormat allowZero={true}  value={ liquidity.formatShares } decimalScale={2} /> <span>{liquidity.unit}</span> </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{version === 'v2' && <div className=\"odd text claim-network\">\r\n\t\t\t\t\t<div className='text-title'>{lang['mining-pnl']}</div>\r\n\t\t\t\t\t<div className=\"text-num\">≈ &nbsp;<DeriNumberFormat allowZero={true} prefix=' ' value={ liquidity.pnl } decimalScale={2} suffix ={' '+ bToken }  /></div>\r\n\t\t\t\t</div>}\r\n\t\t\t\t{(version === 'v1' || version === 'v2_lite' ) && <div className=\"odd claim-network\">\r\n\t\t\t\t\t<div className=\"text-title money\"> <DeriNumberFormat allowZero={true}   value={liquidity.values} suffix ={' '+ bToken } decimalScale={2}/></div>\t\t\t\t\t\t\r\n\t\t\t\t</div>}\r\n\t\t\t\t<Operator version={version} wallet={wallet} chainId={chainId} address={address} liqInfo={liquidity} baseToken={bToken} isLpPool={isLpPool} loadLiqidityInfo={loadLiquidityInfo} symbolId={symbolId} baseTokenId={baseTokenId} lang={lang}/>\r\n\t</div>\r\n  )\r\n}\r\n\r\n\r\nconst AddDialog = withModal(AddLiquidity)\r\nconst RemoveDialog = withModal(RemoveLiquidity)\r\n\r\n//操作区\r\nconst Operator = ({version,wallet,chainId,address,baseToken,isLpPool,liqInfo,loadLiqidityInfo,baseTokenId,symbolId,lang})=> {\r\n\tconst [isApproved,setIsApproved] = useState(false)\r\n\tconst [btnType, setBtnType] = useState('add')\r\n\tconst [isOpen, setIsOpen] = useState(false)\r\n\tconst [balance, setBalance] = useState('');\r\n\tconst [buttonElment, setButtonElment] = useState(null);\r\n\t\r\n\r\n  const loadBalance = async () => {\r\n    if(wallet.isConnected() && eqInNumber(wallet.detail.chainId,chainId)){\r\n\t\t\tlet total = null;\r\n\t\t\tif(isLpPool){\r\n\t\t\t\ttotal = await getLpWalletBalance(wallet.detail.chainId,address,wallet.detail.account);\r\n\t\t\t} else {\r\n\t\t\t\ttotal = await getWalletBalance(wallet.detail.chainId,address,wallet.detail.account,baseTokenId);\r\n\t\t\t}\r\n\t\t\tif(typeof total !== 'object'){\r\n\t\t\t\tsetBalance(total)\t\t\t\t\r\n\t\t\t}\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n\t\tloadBalance();\r\n\t\tloadLiqidityInfo();\r\n    return () => {}\r\n  }, [wallet.detail.account])\r\n\r\n\r\n\tconst isApprove = async () => {\r\n\t\tif(isLpPool){\r\n\t\t\tconst result = await isLpUnlocked(chainId,address,wallet.detail.account) \t\t\t \r\n\t\t\tsetIsApproved(result);\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst result = await isUnlocked(chainId,address,wallet.detail.account,baseTokenId) \t\t\t \r\n\t\t\tsetIsApproved(result);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\r\n\tconst approve = async () => {\r\n\t\tlet res = null;\r\n\t\tif(isLpPool){\r\n\t\t\tres = await unlockLp(chainId,address,wallet.detail.account);\r\n\t\t} else {\r\n\t\t\tres = await unlock(chainId,address,wallet.detail.account,baseTokenId);\r\n\t\t}\t\t\r\n\t\tif(res && res.success){\r\n\t\t\tsetIsApproved(true)\r\n\t\t} else {\r\n\t\t\talert(res.error ?  res.error.message || lang['approve-failed'] : lang['approve-failed'])\r\n\t\t}\r\n  }\r\n\r\n\r\n\tconst connect =  async () => {\r\n\t\ttry {\r\n\t\t\tconst result = await wallet.connect();\r\n\t\t\treturn result ? true : false\r\n\t\t} catch (e){\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst addLiquidity = () => {\r\n\t\tsetIsOpen(true);\r\n\t\tsetBtnType('add')\r\n\t}\r\n\r\n\tconst afterClick = () => {\r\n\t\tsetIsOpen(false);\r\n\t\t// loadLiquidity()\r\n\t\tloadBalance();\r\n\t\tloadLiqidityInfo();\r\n\t\twallet.refresh()\r\n\t}\r\n\r\n\tconst removeLiquidity = () => {\r\n\t\tsetIsOpen(true);\r\n\t\tsetBtnType('remove')\r\n\t}\r\n\r\n\r\n  \r\n  useEffect(() => {\r\n\t\t//todo 判断网络\r\n    if(wallet.isConnected() && eqInNumber(wallet.detail.chainId, chainId)){\r\n\t\t\tisApprove()\r\n    }\r\n\t\treturn () => {}\r\n\t}, [wallet.detail.account])\r\n\r\n\tuseEffect(() => {\t\t\r\n\t\tif(wallet.isConnected() && eqInNumber(wallet.detail.chainId,chainId) && isApproved){\r\n\t\t\tsetButtonElment((<div className=\"add-remove-liquidity\">\r\n\t\t\t<button \r\n\t\t\t\t\tclassName=\"add-liquidity\"\r\n\t\t\t\t\tonClick={addLiquidity}>\r\n\t\t\t\t\t{lang['add-liquidity']}\r\n\t\t\t</button>\r\n\t\t\t<button className=\"remove-liquidity\" onClick={removeLiquidity}>\r\n\t\t\t\t\t{lang['remove-liquidity']}\r\n\t\t\t</button>\r\n\t\t</div>))\r\n\t\t} else {\r\n\t\t\tlet el = null\r\n\t\t\tif(!wallet.isConnected()){\r\n\t\t\t\tel = <div className='approve'><Button className='approve-btn' click={connect} btnText={lang['connect-wallet']} lang={lang}></Button></div>\r\n\t\t\t} else if(!eqInNumber(wallet.detail.chainId,chainId)) {\r\n\t\t\t\twallet.switchNetwork({id: chainId})\r\n\t\t\t\tel = <div className=\"approve\" ><Button className='approve-btn wrong-network' btnText={lang['wrong-network']}  lang={lang} click={() => wallet.switchNetwork({id : chainId})} ></Button></div>\t\t\t\t\r\n\t\t\t} else if(!isApproved) {\r\n\t\t\t\tel = <div className='approve'><Button className='approve-btn' click={approve} btnText={lang['approve']} lang={lang}></Button></div>\r\n\t\t\t} \r\n\t\t\tsetButtonElment(el)\r\n\t\t}\r\n\t\t\t\r\n\t\treturn () => {};\r\n\t}, [wallet.detail.account,isApproved]);\r\n\r\n  return (\r\n    <div className=\"liquidity-btn\">\r\n\t\t\t{\r\n\t\t\t\tbtnType === 'add' \r\n\t\t\t\t? <AddDialog  modalIsOpen={isOpen} isLpPool={isLpPool} onClose={afterClick} balance={balance}\r\n\t\t\t\t\t\t\t\t\t\t  address={address} wallet={wallet} baseToken={baseToken} afterAdd={afterClick} baseTokenId={baseTokenId}  symbolId={symbolId} lang={lang}/> \r\n\t\t\t\t: <RemoveDialog  modalIsOpen={isOpen} isLpPool={isLpPool} onClose={afterClick} liqInfo={liqInfo}  \r\n\t\t\t\t\t\t\t\t\t\t\taddress={address} wallet={wallet} version={version} unit={version === 'v1' ? lang['shares'] :baseToken} afterRemove={afterClick} baseTokenId={baseTokenId} symbolId={symbolId} lang={lang}/>\r\n\t\t\t}\t\t\t\r\n\t\t\t{buttonElment}\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default inject('wallet')(observer(Liquidity))","import React, { useState ,useEffect} from 'react'\r\nimport NumberFormat from 'react-number-format'\r\nimport Button from '../../../Button/Button';\r\nimport Modal from 'react-modal'\r\nimport { addLiquidity, getWalletBalance, bg, addLpLiquidity } from '../../../../lib/web3js/indexV2';\r\nimport useSpecification from '../../../../hooks/useSpecification';\r\nimport useDisableScroll from '../../../../hooks/useDisableScroll';\r\nimport DeriNumberFormat from '../../../../utils/DeriNumberFormat';\r\n\r\n\r\n\r\nexport default function AddLiquidity({wallet,address,baseToken,onClose,afterAdd,balance,isLpPool,baseTokenId,symbolId,lang}){\r\n  const [amount, setAmount] = useState('0');\r\n  const [decimal, setDecimal] = useState('00');\r\n  const [addValue, setAddValue] = useState('')\r\n  const spec = useSpecification({wallet,address,symbolId});\r\n  useDisableScroll();\r\n\r\n\r\n  const input = (e) => {\r\n    const {value} =e.target\r\n    setAddValue(value)\r\n  }\r\n\r\n  const addAll = () => {\r\n    setAddValue(balance);\r\n  }\r\n\r\n  const addLiq = async () => {\r\n    const max = bg(balance)\r\n    const cur = bg(addValue);\r\n    if(cur.gt(max)) {\r\n      alert(lang['not-sufficient-funds']);\r\n      return false;\r\n    }\r\n    if(spec && (+addValue) < (+spec.minAddLiquidity)) {\r\n      alert(`${lang['the-input-liquidity-shall-not-be-less-than']} ${spec.minAddLiquidity}`);\r\n      return false;\r\n    }\r\n    if(addValue <=0 || isNaN(addValue)){\r\n      alert(lang['it-has-to-be-greater-than-zero']);\r\n      return false;\r\n    }\r\n    let res =  null;\r\n    if(isLpPool){\r\n      res = await addLpLiquidity(wallet.detail.chainId,address,wallet.detail.account,addValue);\r\n    } else{\r\n      res = await addLiquidity(wallet.detail.chainId,address,wallet.detail.account,addValue,baseTokenId)\r\n    }\r\n    \r\n    if (!res ||  !res.success) {\r\n      alert(lang['failure-of-transaction']);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  useEffect(() => {    \r\n    const amount = (+balance).toFixed(2)\r\n    const decimal = amount.substring(amount.indexOf('.') + 1,amount.length)\r\n    setAmount(amount);\r\n    setDecimal(decimal)\r\n    return () => {};\r\n  }, [balance]);\r\n\r\n\r\n  return(\r\n    <div className='modal-dialog'>\r\n        <div className='modal-content'>\r\n          <div className='modal-header'>\r\n            <div className='title'>{lang['add-liquidity']}</div>\r\n            <div className='close' onClick={onClose}>\r\n              <span>&times;</span>\r\n            </div>\r\n          </div>\r\n          <div className='modal-body'>\r\n            <div className='margin-box-info'>\r\n              <div>{lang['wallet-balance']}</div>\r\n              <div className='money'>\r\n                <span> \r\n                  <span className='bt-balance'>\r\n                    <NumberFormat displayType='text' value ={amount } thousandSeparator={true} allowZero={true} decimalScale={0}/>.\r\n                    <span className='float'><NumberFormat displayType='text' value ={decimal} thousandSeparator={true} decimalScale={2} allowZero={true}/></span>\r\n                  </span> \r\n                    <div className='base-token'>{ baseToken }</div> \r\n                  </span>\r\n                <span className='add'></span>\r\n              </div>\r\n              <div className='enter-margin'>\r\n                <div className='input-margin'>\r\n                  <div className='box'>\r\n                    <div className='amount' style={{display : addValue ? 'block' : 'none'}}>{lang['liquidity']}</div>\r\n                    <input\r\n                      type='number'\r\n                      className='margin-value'\r\n                      placeholder={lang['liquidity']}\r\n                      value={addValue}\r\n                      onChange={input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>{ baseToken }</div>\r\n              </div>\r\n              <div className='max'>\r\n                {lang['max']}: <span className='max-num'><DeriNumberFormat value={balance} decimalScale={8}/></span>\r\n                <span className='max-btn-left' onClick={addAll}>{lang['add-all']}</span>\r\n              </div>\r\n              <div className='add-margin-btn'>\r\n                <Button className='margin-btn' click={addLiq} btnText={lang['add']} afterClick={afterAdd} lang={lang}/>\r\n              </div>\r\n            </div>\r\n          </div>    \r\n        </div>\r\n      </div>\r\n  )\r\n}","import { useState, useEffect } from 'react'\r\nimport { getSpecification } from \"../lib/web3js/indexV2\";\r\n\r\nexport default function useSpecification({wallet,address,symbolId}){\r\n  const [spec, setSpec] = useState({});\r\n\r\n  const loadSpec = async () => {\r\n    if(wallet.isConnected() && address){\r\n      const spec =  await getSpecification(wallet.detail.chainId,address,symbolId);\r\n      setSpec(spec);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadSpec();\r\n    return () => {      \r\n    }\r\n  }, wallet.detail.account,address);\r\n\r\n  return spec;\r\n}","import React, { useState ,useEffect} from 'react'\r\nimport NumberFormat from 'react-number-format'\r\nimport { removeLiquidity, bg, removeLpLiquidity } from '../../../../lib/web3js/indexV2';\r\nimport Button from '../../../Button/Button';\r\nimport useDisableScroll from '../../../../hooks/useDisableScroll';\r\nimport DeriNumberFormat from '../../../../utils/DeriNumberFormat';\r\n\r\nexport default function RemoveLiquidity({wallet,address,liqInfo,onClose,afterRemove,isLpPool,baseTokenId,unit,lang,version}){  \r\n  const [amount, setAmount] = useState('');\r\n  const [balance, setBalance] = useState('0');\r\n  const [decimal, setDecimal] = useState('00');\r\n  useDisableScroll();\r\n\r\n\r\n  const addAll = () => {\r\n    setAmount(liqInfo.totalShares)\r\n  }\r\n\r\n  const onChange = e => {\r\n    const {value} = e.target;\r\n    setAmount(value)\r\n  }\r\n\r\n  const remove = async () => {\r\n    const max = bg(liqInfo.totalShares);\r\n    const cur = bg(amount);\r\n    if (cur.gt(max)) {\r\n      alert(`${lang['your-current-max-removable-shares-are']}  ${liqInfo.totalShares}`);\r\n      return false;\r\n    }\r\n    if(!isLpPool && version === 'v1'){\r\n      const balance = (+liqInfo.totalShares) - (+amount)\r\n      if (balance < 1 && balance > 0) {\r\n        alert(lang['staking-max-limit-tip']);\r\n        return false;\r\n      }\r\n    }\r\n    if (+amount <= 0 || isNaN(amount)) {\r\n      alert(lang['invalid-liquidity']);\r\n      return false;\r\n    }\r\n    let res = null;\r\n    if(isLpPool){\r\n      res = await removeLpLiquidity(wallet.detail.chainId,address,wallet.detail.account,amount);\r\n    } else {\r\n      res = await removeLiquidity(wallet.detail.chainId,address,wallet.detail.account,amount,baseTokenId,max.eq(cur));\r\n    }\r\n    \r\n    if(!res || !res.success){\r\n      alert(lang['failure-of-transaction']);\r\n      return false; \r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  useEffect(() => {    \r\n    if(liqInfo && liqInfo.formatShares){\r\n      const balance = liqInfo.formatShares;\r\n      const decimal = balance.substring(balance.indexOf('.') +1 ,balance.indexOf('.') + 3)\r\n      setBalance(balance);\r\n      setDecimal(decimal)\r\n    }\r\n    return () => {};\r\n  }, [liqInfo.totalShares]);\r\n\r\n  \r\n  \r\n  return(\r\n    <div className='modal-dialog'>\r\n        <div className='modal-content'>\r\n          <div className='modal-header'>\r\n            <div className='title'>{lang['remove-liquidity']}</div>\r\n            <div className='close' data-dismiss='modal' onClick={onClose}>\r\n              <span>&times;</span>\r\n            </div>\r\n          </div>\r\n          <div className='modal-body'>          \r\n            <div className='margin-box-info'>\r\n              <div> {version === 'v1' ? lang['shares-available'] : lang['liquidity-available']}</div>\r\n              <div className='money'>\r\n                <span>\r\n                  <span className='bt-balance'>\r\n                    <NumberFormat displayType='text' value ={balance} decimalScale={0} thousandSeparator={true}/>.\r\n                    <span className='float'>{decimal}</span>\r\n                  </span>\r\n                    </span>\r\n                <span className='remove'></span>\r\n              </div>\r\n              <div className='enter-margin'>\r\n                <div className='input-margin'>\r\n                  <div className='box'>\r\n                    <div className='amount' style={{display : amount ? 'block' : 'none'}}>\r\n                      {version === 'v1' ? lang['liquidity-shares'] : lang['liquidity']}\r\n                    </div>\r\n                    <input\r\n                      type='number'\r\n                      className='margin-value'\r\n                      placeholder={version === 'v1' ? lang['liquidity-shares'] : lang['liquidity']}\r\n                      value={amount}\r\n                      onChange={onChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>{unit}</div>\r\n              </div>\r\n              <div className='max'>\r\n                <span>{lang['max-removeable']}</span>\r\n                <span className='max-num'><DeriNumberFormat value={liqInfo.totalShares} decimalScale={8}/></span>\r\n                <span className='max-btn-left' onClick={addAll}>{lang['remove-all']}</span>\r\n              </div>\r\n              <div className='add-margin-btn'>\r\n                <Button click={remove} className='margin-btn' btnText={lang['remove']} afterClick={afterRemove} lang={lang}/>\r\n              </div>\r\n            </div>\r\n          </div>    \r\n        </div>\r\n      </div>\r\n      )\r\n}","import Claim from '../../Claim/Claim';\r\nimport Liquidity from './Liquidity';\r\n\r\n\r\nfunction LiquidityMining(props){\r\n  return (\r\n    <div className=\"liquidity-info\">\r\n      <Claim {...props} miningClaim={true}/>\r\n      <Liquidity {...props}/>\r\n  </div>)\r\n}\r\n\r\nexport default LiquidityMining","import { useState, useEffect } from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport { getUserInfoAll,getUserInfoInPool ,getPoolInfoApy} from '../../../lib/web3js/indexV2';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { storeConfig, eqInNumber } from '../../../utils/utils';\r\nimport Config from '../../../model/Config';\r\n\r\nconst configInfo = new Config();\r\n\r\n\r\nfunction Liquidity({wallet = {},version,chainId,address,symbolId,lang}) {\r\n  const [userInfoInPool,setUserInfoInPool] = useState({})\r\n  const [tradeSummary, setTradeSummary] = useState({});\r\n  const history = useHistory();\r\n\r\n\tconst loadUserInfoInPool = async () => {\r\n\t\tconst userInfo = await getUserInfoAll(wallet.account);\r\n\t\tconst userInfoPool = await getUserInfoInPool(chainId,address,wallet.account);\r\n\t\tconst harvestDeriTrade = (+userInfo.trade).toFixed(2);\r\n\t\tconst myTradingVolumeCurrent = userInfoPool.volume1h\r\n\t\tsetUserInfoInPool({harvestDeriTrade,myTradingVolumeCurrent})\r\n\t}\r\n\r\n\tconst getTradeInfo = async () => {\r\n\t\tconst poolInfo = await getPoolInfoApy(chainId,address);\r\n\t\tconst totalTradingVolumeCurrent = poolInfo.volume1h\r\n\t\tsetTradeSummary({totalTradingVolumeCurrent})\r\n  }\r\n  \r\n  const toTrade = () => {\r\n    const configs = configInfo.load(version);\r\n    const config = version.isV1 ? configs.find(c => eqInNumber(c.pool,address)) : configs.find(c => eqInNumber(c.pool,address) && c.symbolId === symbolId)\r\n    storeConfig(version.current,config)\r\n    history.push('/lite')\r\n  }\r\n\r\n\tuseEffect(() => {\r\n\t\tif(wallet && wallet.account){\r\n\t\t\tloadUserInfoInPool();\r\n\t\t\tgetTradeInfo();\r\n\t\t}\r\n\t\treturn () => {};\r\n\t}, []);\r\n\r\n  return(\r\n    <div className=\"liquidity-box\">\r\n      <div className=\"odd title\">{lang['trade-to-earn-deri']}</div>\r\n        <div className=\"odd text\">\r\n            <div className=\"text-title\">{lang['total-trading-volume-in-current-hour']}</div>\r\n            <div className=\"text-num\">{ tradeSummary.totalTradingVolumeCurrent || 0}</div>\r\n        </div>\r\n        <div className=\"odd text\">\r\n            <div className=\"text-title\">{lang['my-trading-volume-in-current-hour']}</div>\r\n            <div className=\"text-num\">{ userInfoInPool.myTradingVolumeCurrent || 0 }</div>\r\n        </div>\r\n        <div className=\"odd text\">\r\n            <div className=\"text-title\"></div>\r\n            <div className=\"text-num\"></div>\r\n        </div>\r\n        <div className=\"odd text\">\r\n            <div className=\"text-title\"></div>\r\n            <div className=\"text-num\"></div>\r\n        </div>\r\n        <div className=\"odd text\">\r\n            <div className=\"text-title\"></div>\r\n            <div className=\"text-num\"></div>\r\n        </div>\r\n        <div className=\"odd claim-network\">\r\n              \r\n        </div>\r\n        <div className=\"claim-btn\">\r\n            <button className=\"claim\" onClick={toTrade}>\r\n              {lang['trade']}\r\n            </button>\r\n        </div>\r\n    </div> \r\n  )\r\n}\r\nexport default inject('version')(observer(Liquidity))","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];"],"sourceRoot":""}