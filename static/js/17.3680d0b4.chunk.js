(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[17],{623:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),c=n.n(a),r=n(1),s=n(17),i=n(7),o=n(60);function l(e){var t=e.btnText,n=e.className,a=e.disabled,l=e.click,u=e.afterClick,d=e.checkApprove,b=e.wallet,p=e.spec,j=e.lang,f=Object(i.useState)(a?"disabled":"enabled"),O=Object(s.a)(f,2),v=O[0],x=O[1],m=Object(i.useState)(!0),h=Object(s.a)(m,2),y=h[0],k=h[1],g=Object(i.useState)(!1),I=Object(s.a)(g,2),N=I[0],w=I[1],A=Object(i.useState)(t),T=Object(s.a)(A,2),S=T[0],C=T[1],q=Object(i.useRef)(null),E=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===v){e.next=2;break}return e.abrupt("return");case 2:return P(),e.next=5,l();case 5:e.sent&&u&&u(),F();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){x("disabled"),w(!0),q.current&&(q.current.style.display="inline-block")},F=function(){q.current&&(q.current.style.display="none"),x("enabled"),w(!1)},L=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&b&&b.detail.account)){e.next=5;break}return e.next=3,b.isApproved(p.pool,p.bTokenId);case 3:t=e.sent,k(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),e.next=3,b.approve(p.pool,p.bTokenId);case 3:e.sent.success?k(!0):(k(!1),alert(j["approve-failed"])),F();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return L(),function(){}}),[b,p,d]),Object(i.useEffect)((function(){return t&&C(t),function(){}}),[t]),Object(o.jsxs)("button",{className:n,onClick:function(){y?E():U()},children:[Object(o.jsx)("span",{className:"btn-loading-wrap",children:Object(o.jsx)("span",{ref:q,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),N?j.pending:y?S:j.approve]})}},624:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(26),c=n(178),r=n(17),s=n(7),i=n(625),o=n(60);function l(e){var t=Object(s.useState)("--"),n=Object(r.a)(t,2),l=n[0],u=n[1];return Object(s.useEffect)((function(){var t=e.allowZero,n=Object(c.a)(e,["allowZero"]);return(void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&u(Object(o.jsx)(i.a,Object(a.a)(Object(a.a)({},n),{},{displayType:"text"}))),function(){}}),[e.value]),l}},626:function(e,t,n){"use strict";var a=n(0),c=n.n(a),r=n(1),s=n(17),i=n(7),o=n(31),l=n(177),u=n(23),d=n(624),b=n(96),p=n(623),j=n(46),f=n(622),O=n.n(f),v=n(60),x=l[u.DeriEnv.get()].chainInfo;function m(e){var t=e.wallet,n=e.pool,a=e.card,l=e.index,b=e.list,f=e.lang,O=Object(i.useState)(""),x=Object(s.a)(O,2),m=x[0],h=x[1],y=Object(o.useHistory)(),k=function(){t.connect()},g=function(){var e=Object(r.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.getUserInfoAllForAirDrop)(t.detail.account);case 2:if((n=e.sent).valid){e.next=6;break}return alert(f["no-deri-to-claim"]),e.abrupt("return");case 6:if(Object(j.c)(t.detail.chainId,n.chainId)){e.next=9;break}return alert(f["please-switch-to-BSC-to-claim-deri"]),e.abrupt("return");case 9:return e.next=11,Object(u.mintAirdrop)(n.chainId,t.detail.account);case 11:e.sent.success||alert(f["claim-failed"]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(n&&n.airdrop)t.isConnected()?h(Object(v.jsx)(p.a,{btnText:f.claim,click:g,lang:f})):h(Object(v.jsx)(p.a,{btnText:f["connect-wallet"],click:k,lang:f}));else{var e="/mining/".concat(n.version||"v1","/").concat(n.chainId,"/").concat(a.type,"/").concat(a.symbol,"/").concat(a.bTokenSymbol,"/").concat(n.address);a.bTokenId&&(e="".concat(e,"?baseTokenId=").concat(a.bTokenId)),a.symbolId&&(e=e.indexOf("?")>0?"".concat(e,"&symbolId=").concat(a.symbolId):"".concat(e,"?symbolId=").concat(a.symbolId)),h(Object(v.jsx)("button",{onClick:function(){return function(e){y.push(e)}(e)},children:f.staking}))}return function(){}}),[t.detail.chainId]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"info",children:[Object(v.jsxs)("div",{className:"top-info",children:[Object(v.jsxs)("div",{className:"pool-top",children:[Object(v.jsx)("span",{className:"logo ".concat(a.bTokenSymbol)}),Object(v.jsx)("span",{className:"base-token",children:a.bTokenSymbol})]}),Object(v.jsxs)("div",{className:"pool-detail",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"title",children:a.airdrop?f.total:f["pool-liq"]}),Object(v.jsx)(d.a,{value:a.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:a.lpApy?7:0})]}),Object(v.jsxs)("div",{className:"apy",children:[Object(v.jsx)("span",{children:f.apy}),Object(v.jsxs)("span",{children:[Object(v.jsx)("span",{className:a.lpApy?"sushi-apy-underline":"",title:a.lpApy&&f["deri-apy"],children:a.apy?Object(v.jsx)(d.a,{value:a.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}):"--"}),a.lpApy&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:" + "}),Object(v.jsxs)("span",{className:a.lpApy?"sushi-apy-underline":"",title:a.lpApy&&a.label,children:[" ",Object(v.jsx)(d.a,{value:a.lpApy,displayType:"text",suffix:"%",decimalScale:2})]})]})]})]})]})]}),Object(v.jsx)("div",{className:"bottom-btn",children:m})]}),l!==b.length-1&&Object(v.jsx)("div",{className:"top-line"})]})}t.a=Object(b.b)("wallet","version")(Object(b.c)((function(e){var t=e.wallet,n=e.group,a=void 0===n?{}:n,c=e.lang,r=a.pool,s=a.list,i=O()("pool",{"only-one":1===s.length,full:5===s.length});return Object(v.jsxs)("div",{className:i,children:[Object(v.jsxs)("div",{className:"pool-header",children:[Object(v.jsxs)("div",{className:"left",children:[Object(v.jsx)("div",{className:"network",children:r.network&&r.network.toUpperCase()}),Object(v.jsxs)("div",{className:"pool-desc",children:[Object(v.jsxs)("span",{className:"symbol",children:[Object(v.jsxs)("span",{className:"symbol-label",children:[c.symbol,":"]}),Object(v.jsx)("span",{children:r.symbol})]}),Object(v.jsxs)("span",{className:"address",children:[Object(v.jsxs)("span",{className:"address-label",children:[c.address,":"]}),r.airdrop?"--":Object(v.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(x[r.chainId]&&x[r.chainId].viewUrl,"/address/").concat(r.address),children:r.formatAdd})]})]})]}),Object(v.jsx)("div",{className:"version",children:r.version})]}),Object(v.jsx)("div",{className:"pool-info",children:s.map((function(e,n){return Object(v.jsx)(m,{card:e,index:n,pool:r,list:s,wallet:t,lang:c})}))})]})})))},627:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),c=n.n(a),r=n(1),s=n(17),i=n(7),o=n(23),l=n(177),u=n(46),d=o.DeriEnv.get(),b=l[d].chainInfo;function p(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),a=n[0],l=n[1],p=Object(i.useState)([]),j=Object(s.a)(p,2),f=j[0],O=j[1],v=Object(i.useState)([]),x=Object(s.a)(v,2),m=x[0],h=x[1],y=Object(i.useState)([]),k=Object(s.a)(y,2),g=k[0],I=k[1];return Object(i.useEffect)((function(){var t=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.getPoolLiquidity)(t.chainId,t.pool,t.bTokenId);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,e.next=8,Object(o.getPoolInfoApy)(t.chainId,t.pool,t.bTokenId);case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:return a=e.t1,r=t.pool||"",e.abrupt("return",Object.assign(t,{network:b[t.chainId].name,liquidity:n.liquidity,apy:(100*+a.apy).toFixed(2),formatAdd:Object(u.d)(r),address:r,type:"perpetual",buttonText:"STAKING"}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(e){var t=[];return e.reduce((function(e,t){var n=e.find((function(e){return Object(u.c)(e.pool.address,t.address)}));if(n&&n.list.length<5)n.list.push(t);else{var a={pool:{network:t.network,symbol:t.symbol,address:t.address,formatAdd:t.formatAdd,version:t.version,chainId:t.chainId,airdrop:t.airdrop,type:t.type,bTokenSymbol:t.bTokenSymbol,bTokenId:t.bTokenId,symbolId:t.symbolId},list:[t]};e.push(a)}return e}),t),t},a=Object(o.getContractAddressConfig)(d,"v2");a=(a=a.reduce((function(e,t){var n=e.findIndex((function(e){return e.bTokenSymbol===t.bTokenSymbol&&t.version===e.version}));return"v2"===t.version&&n>-1&&-1===e[n].symbol.indexOf(t.symbol)?e[n].symbol+=",".concat(t.symbol):e.push(t),e}),[])).map(t);var s=Object(o.getLpContractAddressConfig)(d).map(function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a,r,s,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.getPoolLiquidity)(t.chainId,t.pool);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,e.next=8,Object(o.getPoolInfoApy)(t.chainId,t.pool);case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:if(a=e.t1,r=t.pool||"",!Object(u.k)(t.pool)){e.next=18;break}return e.next=16,Object(o.getLpPoolInfoApy)(t.chainId,t.pool);case 16:l=e.sent,s=l&&(100*+l.apy2).toFixed(2);case 18:return Object(u.l)(t.pool)&&(i="SUSHI-APY"),Object(u.j)(t.pool)&&(i="CAKE-APY"),e.abrupt("return",Object.assign(t,{network:b[t.chainId].name,liquidity:n.liquidity,apy:(100*+a.apy).toFixed(2),formatAdd:Object(u.d)(r),lpApy:s,address:r,type:"lp",label:i,buttonText:"STAKING"}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=a.concat(s);return Promise.all(i).then((function(t){var a=t.filter((function(e){return"v1"===e.version||!e.version})),c=t.filter((function(e){return"v2"===e.version}));e&&(a=n(a),c=n(c)),console.log("v2",c),console.log("v1",a),I(c),h(a),O(t),l(!0)})),function(){return f.length=0}}),[]),[a,f,m,g]}},646:function(e,t,n){},647:function(e,t,n){},735:function(e,t,n){"use strict";n.r(t);var a=n(17),c=n(626),r=n(627),s=(n(646),n(647),n(96)),i=n(60);t.default=Object(s.b)("version")(Object(s.c)((function(e){var t=e.lang,n=Object(r.a)(!0),s=Object(a.a)(n,4),o=s[0],l=(s[1],s[2]),u=s[3];return Object(i.jsxs)("div",{className:"mining-info",children:[Object(i.jsxs)("div",{className:"pools",children:[u.map((function(e,n){return Object(i.jsx)(c.a,{group:e,lang:t},n)})),!o&&Object(i.jsx)("div",{className:"loading",children:Object(i.jsx)("span",{className:"spinner spinner-border spinner-border-sm"})})]}),Object(i.jsx)("div",{className:"pools",children:l.map((function(e,n){return Object(i.jsx)(c.a,{group:e,lang:t},n)}))})]})})))}}]);
//# sourceMappingURL=17.3680d0b4.chunk.js.map